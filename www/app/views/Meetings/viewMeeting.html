#{extends 'magicBox.html' /}	
	#{set 'title'}
	${meeting.name}
	#{if meeting.getStatus().equals("upComing")}
		<span id="currr_${meeting.id}" style="float: left;font-style: italic; font-size :85%;"></span>
		<script type="text/javascript">
		showData(${meeting.id},${meeting.startTime},'${meeting.name}');
		</script>
	#{/if}
	
	#{if (connected.in(project).can('deleteMeeting') ||connected.equals(meeting.creator)) } 
	<a href="#" onclick="javascript:delete_meeting(${meeting.id});" >
	<img title="delete" src="@{'/public/images/famfam/delete.png'}"></img></a>
	#{/if}
	#{if (meeting.startTime > new Date().getTime()) && ((connected.in(project).can('editMeeting') ||connected.equals(meeting.creator))) }
	<a href="javascript:overlayOpen('/admin/meetings/${meeting.id}');" >
	<img title="edit" src="@{'/public/images/famfam/pencil.png'}"></a>
	#{/if}
	#{if (meeting.startTime < new Date().getTime()) && ((connected.in(project).can('editMeeting') ||connected.equals(meeting.creator))) }
	<img class="dim" title="edit" src="@{'/public/images/famfam/pencil.png'}">
	#{/if}
	#{if (meeting.snapshot!=null)}
	<a href="javascript:overlayOpen('/Snapshots/loadsnapShot?id=${meeting.snapshot.id}');" >
	<img title="View Associated Snapshot" src="@{'/public/images/famfam/camera_go.png'}"></a>
	#{/if}
	
	#{if (invited&&attending)}
	<img src="@{'/public/images/famfam/accept.png'}" title="you ${past ? 'attended':'are attending'} this meeting"></img>
	#{/if}
	#{if (invited&&declined)}
	<img src="@{'/public/images/famfam/exclamation.png'}"} title="you ${past ? 'did not attend':'are not attending'} this meeting"></img>
	#{/if}
	#{if meeting.endTime> new Date().getTime()}
	#{if (invited&&!attending&&!declined) }
	<span id="accept_${meeting.id}" style="display:block"><a onClick="javascript:confirm_me(${meeting.id});" title="accept invitation"><img src="@{'/public/images/famfam/application_add.png'}"></a></span>
	<span id="decline_${meeting.id}" style="display:block"><a onClick="javascript:decline_me(${meeting.id});" title="decline invitation"><img src="@{'/public/images/famfam/application_delete.png'}"></a></span>
	<span id="confirmed_${meeting.id}" style="display:none"><img src="@{'/public/images/famfam/accept.png'}" title="you are attending this meeting"></img></span>
	<span id="declined_${meeting.id}" style="display:none"><img src="@{'/public/images/famfam/exclamation.png'}"} title="you are not attending this meeting"></img></span>
	#{/if}
	#{if !invited}
	#{if connected.in(meeting.project).can('joinMeeting')}
	<span id="accepts_${meeting.id}" style="display:block;"><a href="#" onClick="javascript:join_meeting(${meeting.id})"title="join meeting"><img src="@{'/public/images/famfam/go.png'}"></img></a></span>
	<span id="confirmedd_${meeting.id}" style="display:none;"><img src="@{'/public/images/famfam/accept.png'}" title="you are attending this meeting"></img></span>
	#{/if}
	#{/if}
	#{/if}
	#{if (meeting.endTime > new Date().getTime()) && (connected.in(meeting.project).can('editMeeting') || connected.equals(meeting.creator)) }
	#{drop 'meeting-' + meeting.id /}
	#{/if}
	#{/set}
	


<b> Starts  at</b> :   <div class="formatTime">${meeting.startTime}</div> 
<br> 
<b> Ends at</b> :  <div class="formatTime">${meeting.endTime}</div> 
<br> 
<b> Location </b>:   ${meeting.location} 
<br> 
#{if !meeting.type.equals("")}
<b> Meeting Type </b>:  ${meeting.type} <br>
#{/if}
<b> Description </b>:  ${meeting.description.nl2br()}<br>

<div class="reload-meetingAttendees-${meeting.id}" name="@{Meetings.invitedMembers(meeting.id)}">Attendees</div>
<div class="reload-meetingNotes-${meeting.id}" name="@{Meetings.notes(meeting.id)}">Notes</div>
<div class="reload-meetingTasks-${meeting.id}" name="/tasks/magicShow?meetingId=${meeting.id} ">Tasks</div>





<script type="text/javascript" charset="utf-8"> 
// CONFIGURE THE COUNTDOWN SCRIPT HERE

function showData(id,startTime,name) 
{
var date=startTime;
var tz =0;         //  
var lab = 'currr_'+id;    //  The id of the page entry where the timezone countdown is to show
displayTZCountDown(setTZCountDown(date,tz),lab,id,name);
}
function setTZCountDown(date,tz) 
{
	var toDate=new Date(date);
	var fromDate = new Date();
	fromDate.setMinutes(fromDate.getMinutes());
	var diffDate = new Date(0);
	diffDate.setMilliseconds(toDate - fromDate);
	return Math.floor(diffDate.valueOf()/1000);
}
function displayTZCountDown(countdown,tzcd,id,name) 
{
	if (countdown<0 )  
	{
		reload('meeting-'+id);
		
	}

	else 
	{
		var secs = countdown % 60; 
		if (secs < 10) secs = '0'+secs;
		var countdown1 = (countdown - secs) / 60;
		var mins = countdown1 % 60; 
		if (mins < 10) mins = '0'+mins;
		countdown1 = (countdown1 - mins) / 60;
		var hours = countdown1 % 24;
		var days = (countdown1 - hours) / 24;

		if(days= 0 && hours==0&& mins=='05' && secs=='00') 
		{
			alert("5 minutes remaining on the meeting "+name)
		}

		if(days>7)
		{
			document.getElementById(tzcd).innerHTML = "["+days/7 + " W]"
		}
		else
		{
			if(days<=7 && days >0)
			{
				document.getElementById(tzcd).innerHTML = "["+days + " D" + (days == 1 ? '' : 's') + ' : ' +hours+ ' H]'
			}
			else
			{
				if(hours>0)
				document.getElementById(tzcd).innerHTML = "["+hours + " H : " + mins + " M]"
				else
					document.getElementById(tzcd).innerHTML = "["+mins + " M : " + secs + " S]"	
			}
		}
		setTimeout('displayTZCountDown('+(countdown-1)+',\''+tzcd+'\');',999);
	}
}

</script>



