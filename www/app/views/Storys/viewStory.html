#{extends 'magicBox.html' /}
#{set 'title'}Story: ${story.number}#{if connected.in(project).can('editStory')}#{ifnot inSprint}<a href="javascript:overlayOpen('/admin/storys/${story.id}')"><img title="Edit Scenarios" src="@{'/public/images/famfam/pencil.png'}"></a><a href="javascript:overlayOpen('/storys/editScenario?id=${story.id}')"><img title="Edit" src="@{'/public/images/editsce.gif'}"></a>#{/ifnot}#{/if}#{ifnot inSprint}#{if connected.in(project).can('deleteStory')}<a href="#"onclick="deleteStory(${story.id}, this, ${hasDependency});"><img title="Delete" src="@{'/public/images/famfam/delete.png'}"></a>#{/if}#{/ifnot}#{/set}
#{if connected.in(project).can('editStory')}
#{ifnot message.length() == 0}
	#{note}${message}#{/note}
#{/ifnot}
	${story.description}<br>
	<b>Success Scenarios</b><br>
	#{list items:success, as:'suc'}
		%{ 
		int s=0;
		if (suc.trim().length() == 0)
		{
			s++;
		}
		else
		{
			out.print(suc+"<br>");
		}	
		if(s == success.length)
		{
			out.print("No success scenarios are defined for this story.<br>");
		}
	}%
	#{/list}
	<br><b>Failure Scenarios</b><br>
	#{list items:failure, as:'fail'}
	%{ int i=0;
		if (fail.trim().length() == 0)
		{
			i++;
		}
		else
		{
			out.print(fail+"<br>");
		}	
		if(i == failure.length)
		{
			out.print("No failure scenarios are defined for this story.<br>");
		}
	}%
	#{/list}<br>
	#{list items:story.storiesTask, as:'task'}
		<div name="/storys/magicShow?taskId=${task.id}">S:${story.number} ${task.description}</div>
	#{/list}
#{/if}
